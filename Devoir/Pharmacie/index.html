<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POO PHP pharma></title>
</head>

<body>
    <article>
        <em><h2><strong>Objectif : </strong>Ecrire un programme orienté objets en JS qui permet de gérer une pharmacie. </h2></em>
        <ol>
            <li>
                La pharmacie gère des clients et des médicaments. Un client est caractérisé par un nom et un crédit. Le crédit représente la somme que ce client doit à la pharmacie. Le crédit peut être négatif si le client a versé plus d'argent que le montant. Un médicament est caractérisé par un nom (chaîne de caractères), un prix (nombre) et un stock (entier). Les méthodes à compléter auront les caractéristiques suivantes: 

                <ul>
                    <li>client</li>
                    <li>medoc</li>
                </ul>

                <!--Client-->
                <ul>
                    <li>nom string</li>
                    <li>credit number</li>
                </ul>
                <!--médicament-->
                <ul>
                    <li>nom string</li>
                    <li>prix number</li>
                    <li>stock entier</li>
                </ul>
            </li>
            <li>
                affichage(...) permet d'afficher les clients et leurs crédits respectifs ainsi que les médicaments et leurs stocks respectifs. 
            </li>
            <li>
                approvisionnement(..) permet d'approvisionner le stock d'un médicament. Le nom du médicament à approvisionner ainsi que la quantité à ajouter au stock doivent être lus depuis une entrée (terminal ou input html). Lorsque le nom du médicament est introduit, il faut vérifier qu'il s'agit bien d'un nom connu dans la liste des médicaments de la pharmacie. Le programme doit boucler jusqu'à introduction d'un nom correct. Cette procédure de vérification sera prise en charge par la méthode lireMedicament(..)  
            </li>
            <li>
                achat(..) permet de traiter un achat fait par un client. l'achat porte sur un médicament donné dans une quantité donnée. Pour cette transaction le client paie un certain prix. Une opération d'achat aura pour effet de déduire la quantité achetée du stock du médicaments correspondant et d'augmenter le crédit du client (d'un montant équivalent au montant de l'achat moins la somme payée). La quantité achetée et le montant payé sont aussi lus depuis le terminal. Ils seront supposés corrects. 
            </li>
            <li>
                quitter(..) affiche le message "programme terminé!". 
            </li>
            <li>
                -Vous définirez une méthode auxiliaire lireClient(..) prenant comme paramètre un liste de clients. Elle permettra de lire le nom d'un client depuis une entrée et de vérifier si ce client existe dans la liste des clients. Dans ce cas le client sera retourné. Cette méthode doit boucler jusqu'à ce qu'un client soit trouvé. Elle sera utilisée par la méthode achat(..). Une méthode similaire, lireMedicament(..) sera fournie pour les médicaments. Elle sera utilisée par les méthodes achat(..) et approvisionnement(..). 
            </li>
            <li>
                Vous êtes libre de définir, en plus de ces méthodes, toutes celles que vous jugerez nécessaires, et d'utiliser tout format de persistance de données que vous souhaitez.
            </li>
        </ol>
    </article>
</body>
<script>
class Client {
  constructor(hauteur, largeur) {
    this.hauteur = hauteur;
    this.largeur = largeur;
  }
}
</script>

</html>

<!DOCTYPE html>
<html>
    <head>

        <style>
            td {
                border: 2px solid black;
                padding: 10px 80px 10px 80px;
            }
        </style>
    </head>
    <body>
        <form action="#" id="form">
            <fieldset>
                <legend>Creation d'un produit</legend>
                <label for="ref">Référence</label>
                <input type="text" name="reference" class="formin" id="ref">
                <label for="libele">Libélé</label>
                <input type="text" name="libele" class="formin" id="name">
                <br><br><label for="text"></label>
                <textarea name="textarea" rows="10" cols="40" class="formin" id="desc"></textarea><br><br>
                <label for="price">Prix (en €)</label>
                <input type="number" name="prix" class="formin" id="price">
                <label for="stocks">Stocks</label>
                <input type="number" name="stocks" class="formin" id="stock">
                <button type="button" onclick="manage_form()">Valider</button>
                </fieldset>
        </form>
        <br><br>
        <fieldset id="mytable">
            
        </fieldset>
    </body>
<script>

            // FONCTION LOCAL STORAGE
    let jsonData = {}
    function manage_form() {
        let mydata = document.getElementsByClassName('formin');
        for(i=0; i<mydata.length; i++){
            jsonData[mydata[i].id]= mydata[i].value ;          
        }
        let myolddata = localStorage.getItem("entrepot");
        myolddata = JSON.parse(myolddata)
        myolddata.push(jsonData)
        localStorage.setItem("entrepot",JSON.stringify(myolddata))
        createTable()
    }
    // CREATION DE TABLEAU
    let mybody = document.getElementsByTagName('body')[0];
    function createTable(){
        let mydata = localStorage.getItem("entrepot")
        mydata = JSON.parse(mydata)
        let table_container = document.getElementById("mytable")
        let table_concat = `<table>
                            <tr>
                            <th>ref</th>
                            <th>name</th>
                            <th>desc</th>
                            <th>price</th>
                            <th>stock</th>
                            </tr>` ; 
        for(i=0; i<mydata.length ; i++){
            table_concat += "<tr>"
            table_concat += `<td>${mydata[i].ref}</td>
            <td>${mydata[i].name}</td>
            <td>${mydata[i].desc}</td>
            <td>${mydata[i].price}</td>
            <td>${mydata[i].stock}</td>`    
    //    console.log(mydata[i])
        table_concat += "</tr>"
        }   
        table_concat += "</table>"
        table_container.innerHTML = table_concat
        console.log(mydata)
    }
         createTable()   
  //  console.log(myolddata)
   // FIN FONCTION PRINCIPALE
   
  

</script>
</html>

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button>Go!</button>
    <script>
        function Book(mytitle, myisbn, myimail){
                this.title = mytitle,
                this.isbn = myisbn,
                this.genre = myimail
        }
        Book.prototype.bookDetails = function(){
                    console.log(`le livre s'appelle :  ${this.title} et le numero : ${this.isbn} `)
                }
        /* 
        this.details = function(){
                    console.log(`le livre s'appelle :  ${this.title} et le numero : ${this.isbn} `)
                }
        */
        let mybook1 = new Book("teste1", "88946",{"cle":"valeur"});
        let mybook2 = new Book("teste2", "88946",{"espoir":0, "future":"no"});

        function Journal(title,  genre, isbn, author){
            Book.call(this,title, genre, isbn)
            this.author = author
        }


        Journal.prototype = Object.create(Book.prototype)
        Journal.prototype.constructor = Journal

        let myjournall = new Journal("micky", "comic", "876346", "disnay")
        
        //console.log(mybook1.bookDetails())
        document.write(myjournall.author)


        /*###############*/

        class Vehicule {
            constructor(marque, model, nbroures, cylindree){
                this.marque = marque
                this.model = model
                this.nbroures = nbroures
                this.cylindree = cylindree
            }
            showDetails(){
                return `Ma ${this.model} de chez ${this.marque} a ${this.cylindree} cheuveaux et ${this.nbroures} roues` 
            }
        }
        let vehecule1 = new Vehicule("Audi", "Q4", 4 , 160)
        console.log(vehecule1.showDetails())

        class Voiture extends Vehicule{
            constructor(marque,model,nbroures,cylindree){
                super(marque,model)
                this.nbroures = 6
                this.cylindree = 110
            }
        }
        let tuture = new Voiture("Renult", "R6", 4 , 4)
        console.log(tuture)
    </script>
</body>
</html>